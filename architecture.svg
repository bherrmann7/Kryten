<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 620" font-family="Consolas, 'Courier New', monospace">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
    <marker id="arrow-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#4a90d9"/>
    </marker>
    <marker id="arrow-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#5a9a5a"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="900" height="620" fill="#1a1a2e" rx="8"/>

  <!-- Title -->
  <text x="450" y="38" text-anchor="middle" fill="#e0e0e0" font-size="20" font-weight="bold">Kryten Architecture</text>
  <text x="450" y="58" text-anchor="middle" fill="#888" font-size="12">A focused microbot: full LLM intelligence, minimal attack surface</text>

  <!-- Telegram Users -->
  <rect x="30" y="90" width="180" height="200" fill="#16213e" stroke="#4a90d9" stroke-width="1.5" rx="6"/>
  <text x="120" y="115" text-anchor="middle" fill="#4a90d9" font-size="14" font-weight="bold">Telegram Users</text>
  
  <text x="55" y="145" fill="#ccc" font-size="12">ğŸ‘¤ Bob</text>
  <text x="55" y="168" fill="#ccc" font-size="12">ğŸ‘¤ Brian</text>
  <text x="55" y="191" fill="#ccc" font-size="12">ğŸ‘¤ Jerry</text>
  <text x="55" y="214" fill="#999" font-size="11">+ anyone approved</text>
  
  <text x="55" y="248" fill="#666" font-size="10">Private chats</text>
  <text x="55" y="264" fill="#666" font-size="10">Group chats</text>
  <text x="55" y="280" fill="#666" font-size="10">Photos + captions</text>

  <!-- Arrow: Users -> Bot -->
  <line x1="210" y1="190" x2="278" y2="190" stroke="#4a90d9" stroke-width="2" marker-end="url(#arrow-blue)"/>
  <text x="244" y="182" text-anchor="middle" fill="#4a90d9" font-size="9">Telegram</text>
  <text x="244" y="194" text-anchor="middle" fill="#4a90d9" font-size="9">Bot API</text>

  <!-- Bot Core -->
  <rect x="280" y="82" width="280" height="300" fill="#1a1a2e" stroke="#e0a040" stroke-width="2" rx="6"/>
  <rect x="280" y="82" width="280" height="32" fill="#2a2040" rx="6"/>
  <text x="420" y="103" text-anchor="middle" fill="#e0a040" font-size="14" font-weight="bold">ğŸ¤– bot.py</text>

  <!-- Access Control -->
  <rect x="296" y="126" width="248" height="44" fill="#1e2a1e" stroke="#5a9a5a" stroke-width="1" rx="4"/>
  <text x="420" y="143" text-anchor="middle" fill="#5a9a5a" font-size="11" font-weight="bold">Access Control (zero tokens)</text>
  <text x="420" y="160" text-anchor="middle" fill="#7a7" font-size="10">approve/deny â€¢ intro â€¢ pending</text>

  <!-- Zero Token Commands -->
  <rect x="296" y="180" width="248" height="44" fill="#1e2a1e" stroke="#5a9a5a" stroke-width="1" rx="4"/>
  <text x="420" y="197" text-anchor="middle" fill="#5a9a5a" font-size="11" font-weight="bold">Zero-Token Commands</text>
  <text x="420" y="214" text-anchor="middle" fill="#7a7" font-size="10">help â€¢ usage â€¢ photos â€¢ about</text>

  <!-- Tool Executor -->
  <rect x="296" y="234" width="248" height="58" fill="#2a1e2e" stroke="#9a5a9a" stroke-width="1" rx="4"/>
  <text x="420" y="251" text-anchor="middle" fill="#c88ad0" font-size="11" font-weight="bold">Tool Executor</text>
  <text x="420" y="267" text-anchor="middle" fill="#a78aaf" font-size="10">log_exercise â€¢ get_stats</text>
  <text x="420" y="281" text-anchor="middle" fill="#a78aaf" font-size="10">get_photos â€¢ get_usage</text>

  <!-- Conversation Buffer -->
  <rect x="296" y="302" width="248" height="36" fill="#1e1e2a" stroke="#6a6a9a" stroke-width="1" rx="4"/>
  <text x="420" y="322" text-anchor="middle" fill="#8a8ac0" font-size="11">Conversation Buffer (20 msg/chat)</text>

  <!-- Photo Handler -->
  <rect x="296" y="346" width="248" height="26" fill="#2a2a1e" stroke="#9a9a5a" stroke-width="1" rx="4"/>
  <text x="420" y="363" text-anchor="middle" fill="#baba7a" font-size="10">Photo Download + Attachment</text>

  <!-- Arrow: Bot -> Claude -->
  <line x1="560" y1="260" x2="618" y2="260" stroke="#e0a040" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="589" y="250" text-anchor="middle" fill="#e0a040" font-size="9">Only when</text>
  <text x="589" y="272" text-anchor="middle" fill="#e0a040" font-size="9">needed</text>

  <!-- Claude API -->
  <rect x="620" y="170" width="250" height="180" fill="#16213e" stroke="#d4763a" stroke-width="1.5" rx="6"/>
  <text x="745" y="197" text-anchor="middle" fill="#d4763a" font-size="14" font-weight="bold">Anthropic API</text>
  <text x="745" y="217" text-anchor="middle" fill="#e8a060" font-size="12">Claude Sonnet 4.5</text>
  
  <text x="645" y="245" fill="#bbb" font-size="11">ğŸ§  Personality (Kryten)</text>
  <text x="645" y="265" fill="#bbb" font-size="11">ğŸ”§ Tool selection</text>
  <text x="645" y="285" fill="#bbb" font-size="11">ğŸ“ Natural language</text>
  <text x="645" y="305" fill="#bbb" font-size="11">ğŸ¯ 4 tools only</text>
  
  <rect x="640" y="318" width="210" height="22" fill="#2a1a1a" rx="3"/>
  <text x="745" y="334" text-anchor="middle" fill="#d4763a" font-size="10">System prompt + tool definitions</text>

  <!-- Database -->
  <rect x="320" y="430" width="200" height="160" fill="#16213e" stroke="#5a9a5a" stroke-width="1.5" rx="6"/>
  <text x="420" y="455" text-anchor="middle" fill="#5a9a5a" font-size="14" font-weight="bold">ğŸ“¦ db.py</text>
  <text x="420" y="473" text-anchor="middle" fill="#5a9a5a" font-size="11">SQLite</text>
  
  <text x="340" y="500" fill="#aaa" font-size="10">exercises</text>
  <text x="340" y="516" fill="#aaa" font-size="10">exercise_photos</text>
  <text x="340" y="532" fill="#aaa" font-size="10">users</text>
  <text x="340" y="548" fill="#aaa" font-size="10">access_control</text>
  <text x="340" y="564" fill="#aaa" font-size="10">api_usage</text>
  
  <text x="448" y="500" fill="#777" font-size="10">ğŸ“ data/kryten.db</text>
  <text x="448" y="516" fill="#777" font-size="10">ğŸ“ data/photos/</text>

  <!-- Arrow: Bot -> DB -->
  <line x1="420" y1="382" x2="420" y2="424" stroke="#5a9a5a" stroke-width="2" marker-end="url(#arrow-green)"/>

  <!-- Flow Legend -->
  <rect x="30" y="430" width="260" height="160" fill="#111122" stroke="#444" stroke-width="1" rx="6"/>
  <text x="160" y="455" text-anchor="middle" fill="#ccc" font-size="13" font-weight="bold">Message Flow</text>
  
  <text x="50" y="480" fill="#5a9a5a" font-size="11">â‘  Access check</text>
  <text x="80" y="496" fill="#777" font-size="10">â†’ block or canned response</text>
  
  <text x="50" y="518" fill="#5a9a5a" font-size="11">â‘¡ Zero-token shortcut?</text>
  <text x="80" y="534" fill="#777" font-size="10">â†’ instant reply, 0 API cost</text>
  
  <text x="50" y="556" fill="#e0a040" font-size="11">â‘¢ Claude API call</text>
  <text x="80" y="572" fill="#777" font-size="10">â†’ tool use â†’ response</text>
  <text x="80" y="588" fill="#777" font-size="10">â†’ ~$0.01-0.02 per message</text>
</svg>
